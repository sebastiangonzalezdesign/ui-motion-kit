@use '../../../styles/abstracts' as *;

.select-group {
  position: relative;
  width: 100%;

  // Fixed label variant
  &--fixed {
    .select__label--fixed {
      display: block;
      position: static;
      width: 100%;
      text-align: left;
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-medium);
      color: var(--text-primary);
      margin-bottom: var(--spacing-sm);
      padding: 0;
      user-select: none;
      transition: color var(--transition-fast) ease;
      z-index: auto;
      top: auto;
      left: auto;
      transform: none;
    }
  }

  // Floating label variant
  &--floating {
    .select__label--floating {
      position: absolute;
      left: var(--spacing-md);
      top: 50%;
      transform: translateY(-50%);
      font-size: var(--font-size-md);
      font-weight: var(--font-weight-normal);
      transform-origin: left center;
      pointer-events: none;
      z-index: 2;
      transition: all var(--transition-fast) ease;

      .select-group--sm & {
        left: var(--spacing-sm);
        font-size: var(--font-size-sm);
      }

      .select-group--lg & {
        left: var(--spacing-lg);
        font-size: var(--font-size-lg);
      }

      .select-group--outlined & {
        background: var(--background-primary);
        padding: 0 var(--spacing-xs);
        margin-left: calc(-1 * var(--spacing-xs));
      }

      &--focused {
        top: 0;
        transform: translateY(-50%) scale(0.85);
        font-weight: var(--font-weight-medium);
        color: var(--accent-primary);
      }

      .select-group--outlined &--focused {
        color: var(--accent-primary);
      }

      &--error {
        color: var(--feedback-error) !important;
      }
    }
  }
}

.select__wrapper {
  position: relative;
  width: 100%;

  &--error {
    .select {
      border-color: var(--feedback-error);
      color: var(--feedback-error);

      &:focus {
        border-color: var(--feedback-error);
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
      }
    }

    .select__icon {
      color: var(--feedback-error);
    }
  }

  &--success {
    .select {
      border-color: var(--feedback-success);

      &:focus {
        border-color: var(--feedback-success);
        box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
      }
    }

    .select__icon {
      color: var(--feedback-success);
    }
  }
}

.select {
  position: relative;
  width: 100%;
  background: var(--background-primary);
  border: 1px solid var(--border-light);
  border-radius: var(--border-radius-md);
  color: var(--text-primary);
  font-family: var(--font-family-base);
  font-size: var(--font-size-md);
  line-height: var(--line-height-md);
  transition: all var(--transition-fast) ease;
  outline: none;
  appearance: none;
  cursor: pointer;
  padding: var(--spacing-sm) var(--spacing-lg);

  &:hover {
    border-color: var(--border-medium);
  }

  &:focus {
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
  }

  &:disabled {
    background: var(--background-secondary);
    border-color: var(--border-light);
    color: var(--text-disabled);
    cursor: not-allowed;

    & + .select__icon {
      color: var(--text-disabled);
    }
  }

  // Size variants
  .select-group--sm .select {
    height: 36px;
    padding: 0 12px 0 12px;
    font-size: 0.875rem;
    padding-right: 36px; // Space for icon
  }

  .select-group--md .select {
    height: 44px;
    padding: 0 16px 0 16px;
    font-size: 1rem;
    padding-right: 40px; // Space for icon
  }

  .select-group--lg .select {
    height: 52px;
    padding: 0 20px 0 20px;
    font-size: 1.125rem;
    padding-right: 44px; // Space for icon
  }

  // Variant styles
  .select-group--outlined .select {
    background: transparent;
    border: 2px solid var(--border-light);

    &:focus {
      border-color: var(--accent-primary);
    }
  }

  .select-group--filled .select {
    background: var(--background-secondary);
    border: 1px solid transparent;

    &:hover {
      background: var(--background-tertiary);
    }

    &:focus {
      background: var(--background-primary);
      border-color: var(--accent-primary);
    }
  }

  // Floating label adjustments
  .select-group--floating .select {
    padding-top: var(--spacing-lg);
    padding-bottom: var(--spacing-sm);
  }

  .select-group--floating.select-group--sm .select {
    padding-top: var(--spacing-md);
    padding-bottom: var(--spacing-xs);
  }

  .select-group--floating.select-group--lg .select {
    padding-top: var(--spacing-xl);
    padding-bottom: var(--spacing-md);
  }
}

.select__icon {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--color-text-secondary);
  pointer-events: none;
  transition: color var(--transition-fast) ease;

  .select-group--sm & {
    right: 12px;
  }

  .select-group--md & {
    right: 16px;
  }

  .select-group--lg & {
    right: 20px;
  }
}

.select__chevron {
  width: 20px;
  height: 20px;
  transition: transform var(--transition-fast) ease;

  .select:focus + .select__icon & {
    transform: rotate(180deg);
  }

  .select-group--sm & {
    width: 16px;
    height: 16px;
  }

  .select-group--lg & {
    width: 24px;
    height: 24px;
  }
}

.select__label {
  color: var(--text-secondary);
  transition: all var(--transition-fast) ease;
  user-select: none;

  &--floating {
    position: absolute;
    left: var(--spacing-md);
    top: 50%;
    transform: translateY(-50%);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-normal);
    transform-origin: left center;
    pointer-events: none;
    z-index: 2;
    transition: all var(--transition-fast) ease;

    .select-group--sm & {
      left: var(--spacing-sm);
      font-size: var(--font-size-sm);
    }

    .select-group--lg & {
      left: var(--spacing-lg);
      font-size: var(--font-size-lg);
    }

    .select-group--outlined & {
      background: var(--background-primary);
      padding: 0 var(--spacing-xs);
      margin-left: calc(-1 * var(--spacing-xs));
    }

    &--focused {
      top: 0;
      transform: translateY(-50%) scale(0.85);
      font-weight: var(--font-weight-medium);
      color: var(--accent-primary);
    }

    .select-group--outlined &--focused {
      color: var(--accent-primary);
    }

    &--error {
      color: var(--feedback-error) !important;
    }
  }
}

.select__message {
  margin-top: var(--spacing-xs);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-sm);
}

.select__error {
  color: var(--feedback-error);
}

.select__success {
  color: var(--feedback-success);
}

.select__hint {
  color: var(--text-secondary);
}

// Dark theme adjustments
[data-theme='dark'] {
  .select-group--outlined .select__label--floating {
    background: var(--background-primary);
  }
}
